# Документация проекта по автотестам для сайта "Aviasales"
## Реализация проделанной работы
- Составлены два набора автоматизированных тестов для проверки функциональности сайта Aviasales и его API.

- UI-тесты реализованы на базе Selenium WebDriver, Pytest и Allure. Тесты покрывают сценарии автоподстановки аэропортов, блокировки прошедших дат в календаре, активации кнопки поиска, наличия подсказки о возрасте ребёнка в меню пассажиров и отображения списка дешёвых билетов с ценами.

- API-тесты построены с использованием библиотеки Requests, Pytest и Allure. Реализованы методы отправки POST и GET-запросов, повторные попытки при ошибках, извлечение и проверка данных из JSON-ответов. Тесты проверяют поиск города на кириллице и латинице, поиск по коду аэропорта, работу GET-метода вместо POST и обработку запроса с прошедшей датой вылета.

- Оба набора тестов интегрированы с Allure Framework: каждый тест снабжён декораторами @allure.feature, @allure.severity, @allure.title, @allure.description; логические шаги размечены @allure.step или конструкцией with allure.step. Код документирован в соответствии с PEP8, содержит docstring с описанием параметров и возвращаемых значений.

## Структура проекта:

- UI-часть: config.py – конфигурация; base_page.py – базовый класс с ожиданиями; conftest.py – фикстура драйвера; test_aviasales.py – класс MainPage и тесты.

- API-часть: config.py – настройки URL и токена; base_api_client.py – базовый класс с повторными запросами; suggest_api.py – клиент автодополнения; flight_api.py – клиент поиска билетов; test_api_aviasales.py – тесты.

- Ожидания – в UI-тестах используются явные ожидания (WebDriverWait) вместо time.sleep; в API-тестах реализован механизм повторных попыток с задержкой.

## Allure-разметка:

- @allure.feature("...") – группировка тестов по функциональности.

- @allure.severity(...) – уровень критичности.

- @allure.title("...") – человекочитаемое название теста.

- @allure.description("...") – подробное описание.

- @allure.step – декоратор для методов, выполняющих шаги.

- with allure.step("...") – контекстный менеджер для шагов внутри теста.

## Инструкция по запуску тестов для формирования отчета Allure
### Установка зависимостей:
Создайте виртуальное окружение и выполните:

bash
pip install -r requirements.txt
Файл requirements.txt должен содержать библиотеки: selenium, pytest, allure-pytest, webdriver-manager, requests.

### Настройка конфигурации

Для API-тестов в файле api_tests/config.py укажите действующий токен Travelpayouts в параметре TOKEN (текущее значение yourapikeyhere необходимо заменить).

Для UI-тестов драйвер браузера загружается автоматически через webdriver-manager, дополнительных действий не требуется.

### Запуск тестов
Перейдите в корневую директорию проекта и выполните команду:

bash
pytest --alluredir=./allure-results
Данная команда запустит все обнаруженные тесты (как UI, так и API) и сохранит результаты в директорию ./allure-results.

